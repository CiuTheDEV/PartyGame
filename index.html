<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PartyHUB</title>

    <!-- GSAP -->
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

    <style>
        /* [PH] THEME_BEGIN */
        :root{
          color-scheme: dark;
          --bg:#222831;
          --panel:#393E46;
          --accent:#00ADB5;
          --text:#EEEEEE;

          --muted:rgba(238,238,238,.72);
          --dim:rgba(238,238,238,.56);
          --stroke:rgba(238,238,238,.12);
          --stroke2:rgba(0,173,181,.45);
          --shadow:0 22px 60px rgba(0,0,0,.55);
          --r1:28px;
          --r2:18px;
          --pad:clamp(20px,4vw,60px);
          --gap:clamp(18px,3.4vw,44px);
          --focus:0 0 0 3px rgba(0,173,181,.70),0 18px 48px rgba(0,0,0,.62);
        }
        /* [PH] THEME_END */

        *{box-sizing:border-box}
        html,body{height:100%;margin:0;padding:0}

        body{
          font-family:'Segoe UI',Tahoma,sans-serif;
          background:
            radial-gradient(1200px 800px at 18% 12%, rgba(0,173,181,.20), transparent 58%),
            radial-gradient(900px 700px at 82% 20%, rgba(238,238,238,.07), transparent 60%),
            radial-gradient(900px 700px at 60% 92%, rgba(57,62,70,.60), transparent 62%),
            var(--bg);
          color:var(--text);
          display:flex;
          justify-content:center;
          align-items:center;
        }

        #app{width:100%;max-width:1400px;padding:var(--pad);transition:opacity .22s ease, transform .22s ease;will-change:opacity,transform}

        header{text-align:center;margin-bottom:clamp(26px,5vh,70px)}
        header h1{
          font-size:clamp(3rem,8vw,6rem);
          margin:0;
          letter-spacing:1px;
          background:linear-gradient(135deg, var(--accent), rgba(238,238,238,.92));
          -webkit-background-clip:text;background-clip:text;
          -webkit-text-fill-color:transparent;
          filter:drop-shadow(0 18px 28px rgba(0,0,0,.45));
        }
        header p{
          margin:12px 0 0;
          font-size:clamp(1.05rem,2.2vw,1.6rem);
          color:var(--muted);
        }

        .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:var(--gap)}

        .game-card{
          background:linear-gradient(180deg, rgba(57,62,70,.78), rgba(57,62,70,.52));
          border:1px solid var(--stroke);
          border-radius:var(--r1);
          padding:30px 26px 38px;
          cursor:pointer;
          position:relative;
          overflow:hidden;
          box-shadow:var(--shadow);
          transform:translateZ(0);
          transition:transform .22s ease, border-color .22s ease, filter .22s ease, box-shadow .22s ease;
          backdrop-filter:blur(10px);
          -webkit-backdrop-filter:blur(10px);
        }
        .game-card::before{
          content:"";
          position:absolute;
          inset:-2px;
          background:
            radial-gradient(420px 260px at 18% 20%, rgba(0,173,181,.20), transparent 60%),
            radial-gradient(380px 260px at 88% 10%, rgba(238,238,238,.10), transparent 62%),
            linear-gradient(135deg, transparent, rgba(238,238,238,.06), transparent);
          opacity:.85;
          pointer-events:none;
        }
        .game-card::after{
          content:"";
          position:absolute;
          inset:0;
          background:linear-gradient(180deg, rgba(0,173,181,0), rgba(0,173,181,.12));
          opacity:0;
          transition:opacity .22s ease;
          pointer-events:none;
        }
        .game-card:hover{
          transform:translateY(-8px) scale(1.015);
          border-color:var(--stroke2);
          box-shadow:0 26px 70px rgba(0,0,0,.62);
          filter:brightness(1.04);
        }
        .game-card:hover::after{opacity:1}
        .game-card:active{transform:translateY(-4px) scale(1.005)}

        .icon{
          font-size:4.5rem;
          margin-bottom:18px;
          filter:drop-shadow(0 10px 22px rgba(0,0,0,.45));
        }
        .game-title{font-size:1.8rem;font-weight:800;margin-bottom:10px;letter-spacing:.2px}
        .game-desc{font-size:1.05rem;color:var(--dim);line-height:1.35}

        .badge{
          position:absolute;
          top:16px;
          right:16px;
          padding:6px 12px;
          font-size:.78rem;
          letter-spacing:.6px;
          border-radius:999px;
          font-weight:900;
          color:var(--text);
          background:rgba(0,173,181,.16);
          border:1px solid rgba(0,173,181,.55);
          box-shadow:0 10px 22px rgba(0,0,0,.35);
          text-transform:uppercase;
        }
        .badge.hot{background:rgba(0,173,181,.22)}
        .badge.new{background:rgba(0,173,181,.16)}
        .badge.adult{background:rgba(0,173,181,.14)}
        .badge.soon{
          background:rgba(238,238,238,.08);
          border:1px solid rgba(238,238,238,.18);
          color:rgba(238,238,238,.88);
        }

        .game-card.is-disabled{
          cursor:not-allowed;
          opacity:.62;
          filter:grayscale(1) saturate(.15) brightness(.95);
        }
        .game-card.is-disabled:hover{
          transform:none;
          border-color:var(--stroke);
          box-shadow:var(--shadow);
          filter:grayscale(1) saturate(.15) brightness(.95);
        }
        .game-card.is-disabled:hover::after{opacity:0}

        footer{
          margin-top:clamp(26px,5vh,58px);
          display:flex;
          justify-content:center;
          gap:18px;
          opacity:.9;
          flex-wrap:wrap;
        }
        footer button{
          background:linear-gradient(180deg, rgba(57,62,70,.85), rgba(57,62,70,.65));
          color:var(--text);
          border:1px solid var(--stroke);
          padding:14px 22px;
          font-size:1rem;
          border-radius:var(--r2);
          cursor:pointer;
          box-shadow:0 14px 30px rgba(0,0,0,.45);
          transition:transform .18s ease, border-color .18s ease, filter .18s ease;
        }
        footer button:hover{
          border-color:var(--stroke2);
          filter:brightness(1.05);
          transform:translateY(-2px);
        }
        footer button:active{transform:translateY(0)}

        /* QR button + modal */
        footer button.qr-btn{
          background:linear-gradient(135deg, rgba(0,173,181,.34), rgba(57,62,70,.70));
          border-color:rgba(0,173,181,.55);
        }
        footer button.qr-btn:hover{border-color:rgba(0,173,181,.85)}

        .qr-modal{
          position:fixed;
          inset:0;
          display:none;
          align-items:center;
          justify-content:center;
          padding:var(--pad);
          z-index:80;
        }
        .qr-modal.is-open{display:flex}
        .qr-backdrop{
          position:absolute;
          inset:0;
          background:rgba(0,0,0,.62);
          backdrop-filter:blur(8px);
          -webkit-backdrop-filter:blur(8px);
        }
        .qr-card{
          position:relative;
          width:min(560px, 94vw);
          background:linear-gradient(180deg, rgba(57,62,70,.94), rgba(57,62,70,.72));
          border:1px solid rgba(0,173,181,.38);
          border-radius:var(--r1);
          box-shadow:0 34px 96px rgba(0,0,0,.78);
          padding:22px 22px 18px;
          overflow:hidden;
        }
        .qr-card::before{
          content:"";
          position:absolute;
          inset:-2px;
          background:
            radial-gradient(520px 340px at 20% 10%, rgba(0,173,181,.18), transparent 60%),
            radial-gradient(420px 320px at 90% 0%, rgba(238,238,238,.08), transparent 62%);
          pointer-events:none;
          opacity:.9;
        }
        .qr-top{position:relative;display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}
        .qr-title{font-weight:1000;letter-spacing:.6px;text-transform:uppercase;color:rgba(238,238,238,.92)}
        .qr-x{
          width:42px;height:42px;border-radius:14px;
          background:rgba(34,40,49,.35);
          border:1px solid rgba(238,238,238,.14);
          color:rgba(238,238,238,.92);
          cursor:pointer;
          transition:transform .15s ease, border-color .15s ease, filter .15s ease;
        }
        .qr-x:hover{border-color:rgba(0,173,181,.75);filter:brightness(1.06);transform:translateY(-1px)}
        .qr-x:active{transform:translateY(0)}
        .qr-wrap{position:relative;display:flex;justify-content:center;padding:10px 0 6px}
        .qr-img{
          width:min(300px, 72vw);
          height:auto;
          border-radius:18px;
          border:1px solid rgba(238,238,238,.14);
          background:rgba(34,40,49,.55);
          padding:10px;
          box-shadow:0 18px 54px rgba(0,0,0,.55);
        }
        .qr-link{position:relative;text-align:center;margin-top:10px}
        .qr-link a{
          color:rgba(238,238,238,.92);
          text-decoration:none;
          border-bottom:1px dashed rgba(0,173,181,.68);
          padding-bottom:2px;
        }
        .qr-link a:hover{border-bottom-color:rgba(0,173,181,1)}
        .qr-hint{position:relative;text-align:center;margin-top:10px;color:var(--dim);font-size:1rem}

        /* NAV TRANSITION (Netflix vibe) */
        .navfx{
          position:fixed;
          inset:0;
          z-index:200;
          pointer-events:none;
          opacity:0;
          visibility:hidden;
          background:rgba(0,0,0,.12);
        }
        .navfx::after{
          content:"";
          position:absolute;
          inset:0;
          background:radial-gradient(900px 520px at 50% 45%, rgba(0,173,181,.14), rgba(0,0,0,.92));
          opacity:.72;
          pointer-events:none;
        }
        .navfx-bars{position:absolute;inset:0;display:flex}
        .navfx-bar{
          flex:1;
          transform:scaleY(0);
          background:linear-gradient(180deg, rgba(0,173,181,.08), rgba(0,0,0,.92));
          border-left:1px solid rgba(238,238,238,.04);
          box-shadow:inset 0 0 0 1px rgba(0,173,181,.06);
        }
        .navfx-line{
          position:absolute;
          left:-12%;
          right:-12%;
          top:50%;
          height:2px;
          transform:translateY(-50%) scaleX(0);
          opacity:0;
          background:linear-gradient(90deg, transparent, var(--accent), transparent);
          filter:drop-shadow(0 0 16px rgba(0,173,181,.75));
        }

        /* CSS fallback (gdy GSAP nie dzia≈Ça / jest zablokowany) */
        .navfx.is-open{opacity:1;visibility:visible}
        #app.is-fade{opacity:0;transform:scale(.985)}
        .navfx.is-open .navfx-bar{animation:navfxUp .78s cubic-bezier(.12,.72,.22,1) forwards}
        .navfx.is-open .navfx-bar:nth-child(1){animation-delay:.08s}
        .navfx.is-open .navfx-bar:nth-child(2){animation-delay:.145s}
        .navfx.is-open .navfx-bar:nth-child(3){animation-delay:.21s}
        .navfx.is-open .navfx-bar:nth-child(4){animation-delay:.275s}
        .navfx.is-open .navfx-bar:nth-child(5){animation-delay:.34s}
        .navfx.is-open .navfx-bar:nth-child(6){animation-delay:.405s}
        .navfx.is-open .navfx-bar:nth-child(7){animation-delay:.47s}
        .navfx.is-open .navfx-bar:nth-child(8){animation-delay:.535s}
        .navfx.is-open .navfx-bar:nth-child(9){animation-delay:.60s}
        .navfx.is-open .navfx-line{animation:navfxLine .46s ease-out .28s forwards}
        @keyframes navfxUp{from{transform:scaleY(0)}to{transform:scaleY(1)}}
        @keyframes navfxLine{
          0%{transform:translateY(-50%) scaleX(0);opacity:0}
          25%{opacity:1}
          100%{transform:translateY(-50%) scaleX(1);opacity:0}
        }

        /* TV FOCUS MODE */
        .game-card:focus{
          outline:none;
          box-shadow:var(--focus);
          border-color:rgba(0,173,181,.75);
        }
        body.tv-mode .game-card{padding:40px 34px 50px}
        body.tv-mode header h1{font-size:clamp(4rem,8vw,7rem)}

        @media (max-width:520px){
          .icon{font-size:4rem}
          .game-card{padding:26px 22px 32px}
        }
        @media (prefers-reduced-motion:reduce){
          *{transition:none!important;animation:none!important}
          .game-card:hover,.game-card:active{transform:none}
        }
    </style>
</head>

<body>
    <div id="app">

        <header>
            <h1>PARTYHUB</h1>

        </header>

        <section class="grid" id="gameGrid">

            <div class="game-card" data-link="games/tajniacy/index.html">
                <span class="badge hot">HOT</span>
                <div class="icon">üéØ</div>
                <div class="game-title">Tajniacy</div>
                <div class="game-desc">Dru≈ºynowa gra skojarze≈Ñ!</div>
            </div>

            <div class="game-card" data-link="games/kalambury/index.html">
                <span class="badge new">NEW</span>
                <div class="icon">üé≠</div>
                <div class="game-title">Kalambury</div>
                <div class="game-desc">Prezentuj, zgaduj, zdobywaj punkty!</div>
            </div>

            <div class="game-card is-disabled" data-disabled="1">
                <span class="badge soon">WKR√ìTCE</span>
                <div class="icon">‚è±Ô∏è</div>
                <div class="game-title">5 Sekund</div>
                <div class="game-desc">Wkr√≥tce ‚Äî gra w przygotowaniu</div>
            </div>

<!-- WORK IN PROGRESS
           
            <div class="game-card" data-link="games/5sekund/index.html">
                <span class="badge new">NEW</span>
                <div class="icon">‚è±Ô∏è</div>
                <div class="game-title">5 Sekund</div>
                <div class="game-desc">Czas dzia≈Ça na TwojƒÖ niekorzy≈õƒá</div>
            </div>

            <div class="game-card">
                <span class="badge adult">WIP</span>
                <div class="icon">üîú</div>
                <div class="game-title">WORK IN PROGRESS</div>
                <div class="game-desc">Be patient</div>
            </div>

            <div class="game-card">
                <div class="icon">üé≤</div>
                <div class="game-title">Losowa gra</div>
                <div class="game-desc">Niech los zdecyduje</div>
            </div>
-->
        </section>

        <footer>
            <button id="qrBtn" class="qr-btn" aria-haspopup="dialog" aria-controls="qrModal">QR code</button>
        </footer>

        <div class="qr-modal" id="qrModal" aria-hidden="true">
            <div class="qr-backdrop" id="qrBackdrop" aria-hidden="true"></div>
            <div class="qr-card" role="dialog" aria-modal="true" aria-labelledby="qrTitle">
                <div class="qr-top">
                    <div class="qr-title" id="qrTitle">QR code</div>
                    <button class="qr-x" id="qrClose" aria-label="Zamknij">‚úï</button>
                </div>
                <div class="qr-wrap">
                    <img class="qr-img" id="qrImg" alt="QR code do strony PartyGame" />
                </div>
                <div class="qr-link">
                    <a href="https://ciuthedev.github.io/PartyGame/" target="_blank" rel="noopener">ciuthedev.github.io/PartyGame/</a>
                </div>
                <div class="qr-hint">Zeskanuj telefonem, ≈ºeby odpaliƒá stronƒô.</div>
            </div>
        </div>
    </div>

    <div id="navFx" class="navfx" aria-hidden="true">
        <div class="navfx-bars" aria-hidden="true">
            <span class="navfx-bar"></span><span class="navfx-bar"></span><span class="navfx-bar"></span>
            <span class="navfx-bar"></span><span class="navfx-bar"></span><span class="navfx-bar"></span>
            <span class="navfx-bar"></span><span class="navfx-bar"></span><span class="navfx-bar"></span>
        </div>
        <div class="navfx-line" aria-hidden="true"></div>
    </div>

    <script>
        // ===== START ANIMACJI =====
        gsap.from('header h1', {
            y: -40,
            opacity: 0,
            duration: 1,
            ease: 'power3.out'
        });
        gsap.from('header p', {
            y: -20,
            opacity: 0,
            duration: .8,
            delay: .3
        });
        gsap.from('.game-card', {
            opacity: 0,
            y: 40,
            stagger: .12,
            duration: .8,
            delay: .6,
            ease: 'power3.out'
        });

        // ===== TRYB TV =====
        const cards = [...document.querySelectorAll('.game-card')];
        cards.forEach(c => c.setAttribute('tabindex', '0'));
        let focusIndex = 0;

        function focusCard(i) {
            focusIndex = (i + cards.length) % cards.length;
            cards[focusIndex].focus();
        }

        focusCard(0);

        // ===== QR MODAL =====
        const QR_URL = 'https://ciuthedev.github.io/PartyGame/';
        const qrBtn = document.getElementById('qrBtn');
        const qrModal = document.getElementById('qrModal');
        const qrBackdrop = document.getElementById('qrBackdrop');
        const qrClose = document.getElementById('qrClose');
        const qrImg = document.getElementById('qrImg');

        if (qrImg) {
            qrImg.src = 'https://api.qrserver.com/v1/create-qr-code/?size=360x360&margin=12&data=' + encodeURIComponent(QR_URL);
        }

        const isQrOpen = () => qrModal && qrModal.classList.contains('is-open');

        function openQR() {
            if (!qrModal) return;
            qrModal.classList.add('is-open');
            qrModal.setAttribute('aria-hidden', 'false');
            qrClose && qrClose.focus();
        }

        function closeQR() {
            if (!qrModal) return;
            qrModal.classList.remove('is-open');
            qrModal.setAttribute('aria-hidden', 'true');
            qrBtn && qrBtn.focus();
        }

        qrBtn && qrBtn.addEventListener('click', openQR);
        qrBackdrop && qrBackdrop.addEventListener('click', closeQR);
        qrClose && qrClose.addEventListener('click', closeQR);

        // ===== NAV TRANSITION (Netflix vibe) =====
        // Je≈õli masz w systemie w≈ÇƒÖczone "reduce motion", a mimo to chcesz animacje ‚Äî zostaw true.
        const FORCE_TRANSITION = true;
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const navFx = document.getElementById('navFx');
        const navBars = navFx ? [...navFx.querySelectorAll('.navfx-bar')] : [];
        const navLine = navFx ? navFx.querySelector('.navfx-line') : null;
        let isNavigating = false;

        function cssTransitionTo(url){
            if(!navFx) { window.location.href = url; return; }
            navFx.classList.add('is-open');
            document.getElementById('app')?.classList.add('is-fade');

            // czekamy a≈º OSTATNI pasek sko≈Ñczy animacjƒô (≈ºeby nie ucina≈Ço ko≈Ñc√≥wki)
            const last = navBars && navBars.length ? navBars[navBars.length - 1] : null;
            let waitMs = 1500;
            if (last) {
                const cs = getComputedStyle(last);
                const d = parseFloat(cs.animationDelay || '0') * 1000;
                const t = parseFloat(cs.animationDuration || '0.78') * 1000;
                waitMs = Math.max(900, d + t + 260);
            }
            window.setTimeout(() => { window.location.href = url; }, waitMs);
        }

        function netflixTransitionTo(url){
            if(!url || isNavigating) return;
            isNavigating = true;

            const allowMotion = FORCE_TRANSITION || !prefersReducedMotion;
            const canUseGsap = !!window.gsap && typeof gsap.timeline === 'function';

            // je≈õli nie chcemy animacji albo brak overlay ‚Äî idziemy od razu
            if (!allowMotion || !navFx) {
                window.location.href = url;
                return;
            }

            // fallback CSS (gdy GSAP nie dzia≈Ça / jest zablokowany)
            if (!canUseGsap || navBars.length === 0) {
                cssTransitionTo(url);
                return;
            }

            gsap.set(navFx, { autoAlpha: 1, visibility: 'visible' });
            gsap.set(navBars, { scaleY: 0, transformOrigin: 'bottom' });
            if (navLine) gsap.set(navLine, { scaleX: 0, autoAlpha: 0, transformOrigin: 'left' });

            const tl = gsap.timeline({ defaults: { ease: 'power4.inOut' } });
            const barsStart = 0.08;
            const barsDur = 0.78;
            const barsStagger = 0.06;
            const barsEnd = barsStart + (navBars.length - 1) * barsStagger + barsDur;
            tl.to('#app', { autoAlpha: 0, scale: 0.985, duration: 0.32, ease: 'power2.out' }, 0)
              .to(navBars, { scaleY: 1, duration: 0.78, stagger: 0.06, ease: 'power3.in' }, 0.08);

            if (navLine) {
                tl.to(navLine, { autoAlpha: 1, scaleX: 1, duration: 0.44, ease: 'power2.out' }, 0.26)
                  .to(navLine, { autoAlpha: 0, duration: 0.18 }, 0.78);
            }

            tl.call(() => { window.location.href = url; }, null, barsEnd + 0.26);
        }

        // ===== KLAWIATURA / PILOT =====
        window.addEventListener('keydown', e => {
            // gdy modal QR jest otwarty, blokujemy nawigacjƒô po kafelkach
            if (isQrOpen()) {
                if (e.key === 'Escape') {
                    e.preventDefault();
                    closeQR();
                }
                return;
            }

            if (['ArrowRight', 'ArrowDown'].includes(e.key)) {
                e.preventDefault();
                focusCard(focusIndex + 1);
            }
            if (['ArrowLeft', 'ArrowUp'].includes(e.key)) {
                e.preventDefault();
                focusCard(focusIndex - 1);
            }
            if (e.key === 'Enter') {
                cards[focusIndex].click();
            }
        });

        // ===== KLIK / MYSZ =====
        cards.forEach(card => {
            card.addEventListener('click', () => {
                if (card.dataset.disabled === '1' || card.classList.contains('is-disabled')) return;
                const link = card.dataset.link;
                if (!link) {
                    console.warn('Brak data-link');
                    return;
                }
                netflixTransitionTo(link);
            });
        });

    </script>
</body>

</html>
